<div [ngClass]="getClassContainerDiv()">
  @if (label !== '') {
    <label
      [for]="selectId"
      [ngClass]="getClassLabel()"
    >
      {{ label }}
    </label>
  }

  <div [ngClass]="getClassContainerInput()">
    @if (type === 'valueString') {
      <p-inputgroup>
        <p-button
          *ngIf="btnConfig"
          [loading]="btnConfig.loading"
          [disabled]="btnConfig.disabled"
          [icon]="btnConfig.icon"
          [severity]="btnConfig.severity"
          [outlined]="btnConfig.outlined"
          (onClick)="onBtnClick.emit()"
        />
        <p-select
          fluid
          [id]="selectId"
          [loading]="loading"
          [formControl]="customFormControl"
          [placeholder]="placeholder"
          [options]="options"
          [optionValue]="optionValue"
          [showClear]="showClear"
          [size]="size"
          [appendTo]="'body'"
          [attr.aria-label]="label"
          [attr.aria-required]="required"
          [attr.aria-describedby]="getAriaDescribedBy()"
          (onChange)="onChange.emit($event)"
        >
          <ng-template
            #selectedItem
            let-selectedOption
          >
            <div
              class="flex items-center gap-2"
              *ngIf="selectedOption"
            >
              {{ getOptionLabel(selectedOption) }}
            </div>
          </ng-template>
          <ng-template
            let-options
            #item
          >
            <div class="flex items-center gap-2">
              {{ getOptionLabel(options) }}
            </div>
          </ng-template>
        </p-select>
      </p-inputgroup>
    }

    @if (type === 'valueStringLazy') {
      <p-inputgroup>
        <p-button
          *ngIf="btnConfig"
          [loading]="btnConfig.loading"
          [disabled]="btnConfig.disabled"
          [icon]="btnConfig.icon"
          [severity]="btnConfig.severity"
          [outlined]="btnConfig.outlined"
          (onClick)="onBtnClick.emit()"
        />
        <p-select
          fluid
          [id]="selectId"
          [loading]="loading"
          [formControl]="customFormControl"
          [placeholder]="placeholder"
          [options]="options"
          [optionValue]="optionValue"
          [showClear]="showClear"
          [size]="size"
          [appendTo]="'body'"
          [lazy]="lazy"
          [virtualScroll]="lazy"
          [virtualScrollItemSize]="40"
          [virtualScrollOptions]="{
            delay: 100,
            showLoader: lazy,
            lazy: lazy,
          }"
          [attr.aria-label]="label"
          [attr.aria-required]="required"
          [attr.aria-describedby]="getAriaDescribedBy()"
          (onChange)="onChange.emit($event)"
          (onLazyLoad)="onLazyLoad.emit($event)"
        >
          <ng-template
            #selectedItem
            let-selectedOption
          >
            <div
              class="flex items-center gap-2"
              *ngIf="selectedOption"
            >
              {{ getOptionLabel(selectedOption) }}
            </div>
          </ng-template>
          <ng-template
            let-options
            #item
          >
            <div class="flex items-center gap-2">
              {{ getOptionLabel(options) }}
            </div>
          </ng-template>
        </p-select>
      </p-inputgroup>
    }

    @if (type === 'valueObject') {
      <p-inputgroup>
        <p-button
          *ngIf="btnConfig"
          [loading]="btnConfig.loading"
          [disabled]="btnConfig.disabled"
          [icon]="btnConfig.icon"
          [severity]="btnConfig.severity"
          [outlined]="btnConfig.outlined"
          (onClick)="onBtnClick.emit()"
        />
        <p-select
          fluid
          [id]="selectId"
          [loading]="loading"
          [formControl]="customFormControl"
          [placeholder]="placeholder"
          [options]="options"
          [showClear]="showClear"
          [size]="size"
          [appendTo]="'body'"
          [attr.aria-label]="label"
          [attr.aria-required]="required"
          [attr.aria-describedby]="getAriaDescribedBy()"
          (onChange)="onChange.emit($event)"
        >
          <ng-template
            #selectedItem
            let-selectedOption
          >
            <div
              class="flex items-center gap-2"
              *ngIf="selectedOption"
            >
              {{ getOptionLabel(selectedOption) }}
            </div>
          </ng-template>
          <ng-template
            let-options
            #item
          >
            <div class="flex items-center gap-2">
              {{ getOptionLabel(options) }}
            </div>
          </ng-template>
        </p-select>
      </p-inputgroup>
    }

    @if (type === 'valueObjectLazy') {
      <p-inputgroup>
        <p-button
          *ngIf="btnConfig"
          [loading]="btnConfig.loading"
          [disabled]="btnConfig.disabled"
          [icon]="btnConfig.icon"
          [severity]="btnConfig.severity"
          [outlined]="btnConfig.outlined"
          (onClick)="onBtnClick.emit()"
        />
        <p-select
          fluid
          [id]="selectId"
          [loading]="loading"
          [formControl]="customFormControl"
          [placeholder]="placeholder"
          [options]="options"
          [showClear]="showClear"
          [size]="size"
          [appendTo]="'body'"
          [lazy]="lazy"
          [virtualScroll]="lazy"
          [virtualScrollItemSize]="40"
          [virtualScrollOptions]="{
            delay: 100,
            showLoader: lazy,
            lazy: lazy,
          }"
          [attr.aria-label]="label"
          [attr.aria-required]="required"
          [attr.aria-describedby]="getAriaDescribedBy()"
          (onChange)="onChange.emit($event)"
          (onLazyLoad)="onLazyLoad.emit($event)"
        >
          <ng-template
            #selectedItem
            let-selectedOption
          >
            <div
              class="flex items-center gap-2"
              *ngIf="selectedOption"
            >
              {{ getOptionLabel(selectedOption) }}
            </div>
          </ng-template>
          <ng-template
            let-options
            #item
          >
            <div class="flex items-center gap-2">
              {{ getOptionLabel(options) }}
            </div>
          </ng-template>
        </p-select>
      </p-inputgroup>
    }

    @if (formUtils.isInvalidValidField(customFormControl)) {
      <span
        [id]="selectId + '-error'"
        class="text-red-600"
      >
        {{ formUtils.getFieldError(customFormControl) }}
      </span>
    } @else if (helpText !== null) {
      <span
        [id]="selectId + '-help'"
        [ngClass]="helpTextType === 'error' ? 'text-red-600' : 'text-muted-color'"
      >
        {{ helpText }}
      </span>
    }
  </div>
</div>
